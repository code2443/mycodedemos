var TaskData=function(){var n=this;return n.cate_list=[],n.task_list=[],n.get_cate_item=function(n){var t=jQuery(n);return{cate:t.data("cate"),name:t.text(),root:t.data("root"),itemclass:t.data("class")}},n.init_cate=function(t){var i=t.find("li");jQuery.each(i,function(t,i){var r=n.get_cate_item(i);n.cate_list.push(r)})},n.get_task_cate=function(n){var t=parseInt(n);return isNaN(t)?null:Math.floor(t/8)+1},n.get_task_item=function(t){var r=jQuery(t),i={name:r.text(),url:r.attr("href")},u=i.name.match(/【(\S*?)】/),e,f;return u.length<2?null:(i.cate=u[1],i.name=i.name.replace(u[0],""),i.cate=i.cate.replace("远征",""),e=r.text(),f=n.get_task_cate(i.cate),f==null)?null:(i.index=i.cate,i.cate=f,i)},n.init_task=function(t){var i=t.find("a");jQuery.each(i,function(t,i){var r=n.get_task_item(i);!r||n.task_list.push(r)})},n.get_catelist=function(t){return jQuery.grep(n.cate_list,function(n){return n.root==t})},n.get_tasklist=function(t){return jQuery.grep(n.task_list,function(n){return n.cate==t})},n.find_tasklist=function(t){return jQuery.grep(n.task_list,function(n){return n.name.indexOf(t)>=0})},n.init=function(){n.init_cate(jQuery(".main_frame .all_cate"));n.init_task(jQuery(".main_frame .all_task"))},n},TaskAnimate=function(){var n=this;return n.show_children=function(n,t){n.addClass("animateing");n.addClass("open");var r=n.parent(),i=r.children(".children_frame"),u=i.children(".children");i.animate({height:u.height()},400,"easeInOutQuart",function(){i.css({height:"auto"});n.removeClass("animateing");!t||t()})},n.hide_children=function(n,t){n.addClass("animateing");n.removeClass("open");var r=n.parent(),i=r.children(".children_frame"),u=i.children(".children");i.animate({height:0},400,"easeInOutQuart",function(){n.removeClass("animateing");!t||t()})},n.bindevent=function(t){t.hasClass("bindevent")||(t.addClass("bindevent"),t.bind("click",function(){var t=jQuery(this);t.hasClass("animateing")||(t.hasClass("open")?n.hide_children(t):n.show_children(t))}))},n},TaskList=function(){var n=this;return n.taskdata=null,n.animate=new TaskAnimate,n.all_task_frame=null,n.set_data=function(t){n.taskdata=t},n.uie=function(n){return jQuery("<"+n+"><\/"+n+">")},n.write_task_item=function(t){var r=n.uie("li"),i=n.uie("a"),u=n.uie("b"),f=n.uie("span");return r.append(i),i.attr({href:t.url,target:"_blank"}),i.append(u),i.append(f),u.html(t.index),f.html(t.name),r},n.write_tasks=function(t){var i=n.uie("ul");return jQuery.each(t,function(t,r){var u=n.write_task_item(r);i.append(u)}),i},n.write_tasks_order=function(t){var i=n.taskdata.get_tasklist(t);return i.sort(function(n,t){return parseInt(n.index)>parseInt(t.index)?1:-1}),n.write_tasks(i)},n.write_cate=function(t){var i=n.uie("div"),r=n.uie("div"),o=n.uie("i"),e=n.uie("span"),u,f;return i.append(r),i.addClass("cate"),i.addClass(t.itemclass),r.addClass("title"),r.append(o),r.append(e),e.html(t.name),u=n.uie("div"),f=n.write_tasks_order(t.cate),!f||(u.addClass("children_frame"),i.append(u),f.addClass("children"),u.append(f)),n.animate.bindevent(r),i},n.write_cates=function(t){var i=n.uie("div"),r=n.taskdata.get_catelist(t);return jQuery.each(r,function(t,r){var u=n.write_cate(r);i.append(u)}),i},n.write_all=function(){n.all_task_frame.empty();var t=n.write_cates("root");t.addClass("all_cate");n.all_task_frame.append(t)},n.init=function(){n.all_task_frame=jQuery(".main_frame .main_content .tasklist")},n.open_first=function(){var n=jQuery(".main_content .all_cate .cate:first .title");n.trigger("click")},n},taskdata=null,tasklist=null;jQuery(document).ready(function(){taskdata=new TaskData;taskdata.init();tasklist=new TaskList;tasklist.set_data(taskdata);tasklist.init();tasklist.write_all();setTimeout(tasklist.open_first,0)});
/*
//# sourceMappingURL=baike_yz.min.js.map
*/